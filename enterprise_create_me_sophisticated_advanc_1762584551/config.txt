<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Calculator - Configuration</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #3a7bd5, #3a6073);
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .config-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            width: 80%;
            max-width: 600px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .config-item {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 1.2em;
            margin-bottom: 5px;
            color: #ddd;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1em;
            margin-top: 5px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            outline: none;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.3);
        }

        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M287.694%2069.251l-143.236%20143.236c-4.752%204.752-12.451%204.752-17.206%200l-143.236-143.236c-4.752-4.752-4.752-12.451%200-17.206%204.752-4.752%2012.451-4.752%2017.206%200l134.633%20134.633c2.285%202.283%205.271%203.424%208.602%203.424%203.331%200%206.316-1.141%208.602-3.424l134.633-134.633c4.752-4.752%2012.451-4.752%2017.206%200%204.752%204.752%204.752%2012.451%200%2017.206z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 1em;
            padding-right: 30px;
        }

        button {
            background: linear-gradient(to right, #4a90e2, #63b8ff);
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            margin-top: 20px;
            width: 100%;
            display: block;
        }

        button:hover {
            background: linear-gradient(to right, #63b8ff, #4a90e2);
            transform: translateY(-2px);
            box-shadow: 0 5px 7px rgba(0, 0, 0, 0.4);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        /* Error Handling Styling */
        .error-message {
            color: #ff4d4d;
            font-size: 0.9em;
            margin-top: 5px;
            display: block;
        }

        /* Loading State Styling */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-spinner {
            border: 8px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 8px solid #fff;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .config-container {
                width: 95%;
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>

    <div class="config-container">
        <h1>Advanced Calculator Configuration</h1>

        <div class="config-item">
            <label for="theme">Theme:</label>
            <select id="theme">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="system">System Default</option>
                <option value="custom">Custom</option>
            </select>
        </div>

        <div class="config-item">
            <label for="decimalPlaces">Decimal Places:</label>
            <input type="number" id="decimalPlaces" value="2" min="0" max="10">
            <span class="error-message" id="decimalPlacesError"></span>
        </div>

        <div class="config-item">
            <label for="angleUnit">Angle Unit:</label>
            <select id="angleUnit">
                <option value="radians">Radians</option>
                <option value="degrees">Degrees</option>
            </select>
        </div>

        <div class="config-item">
            <label for="precisionMode">Precision Mode:</label>
            <select id="precisionMode">
                <option value="standard">Standard</option>
                <option value="high">High Precision</option>
            </select>
        </div>

        <div class="config-item">
            <label for="complexNumbers">Complex Numbers:</label>
            <select id="complexNumbers">
                <option value="enabled">Enabled</option>
                <option value="disabled">Disabled</option>
            </select>
        </div>

        <div class="config-item">
            <label for="scientificNotationThreshold">Scientific Notation Threshold:</label>
            <input type="number" id="scientificNotationThreshold" value="1e6" step="1e6">
        </div>

        <div class="config-item">
            <label for="fontSize">Font Size:</label>
            <input type="number" id="fontSize" value="16" min="12" max="24">
        </div>

        <div class="config-item">
            <label for="animationSpeed">Animation Speed (ms):</label>
            <input type="number" id="animationSpeed" value="200" min="0" max="1000">
        </div>

        <div class="config-item">
            <label for="undoDepth">Undo Depth:</label>
            <input type="number" id="undoDepth" value="10" min="1" max="50">
        </div>

        <div class="config-item">
            <label for="exportFormat">Export Format:</label>
            <select id="exportFormat">
                <option value="json">JSON</option>
                <option value="csv">CSV</option>
                <option value="text">Plain Text</option>
            </select>
        </div>

        <button onclick="saveConfig()">Save Configuration</button>
    </div>

    <script>
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        function saveConfig() {
            showLoading();
            // Simulate saving to localStorage and potentially an API call.
            setTimeout(() => {
                const theme = document.getElementById('theme').value;
                const decimalPlaces = document.getElementById('decimalPlaces').value;
                const angleUnit = document.getElementById('angleUnit').value;
                const precisionMode = document.getElementById('precisionMode').value;
                const complexNumbers = document.getElementById('complexNumbers').value;
                const scientificNotationThreshold = document.getElementById('scientificNotationThreshold').value;
                const fontSize = document.getElementById('fontSize').value;
                const animationSpeed = document.getElementById('animationSpeed').value;
                const undoDepth = document.getElementById('undoDepth').value;
                const exportFormat = document.getElementById('exportFormat').value;

                // Input Validation
                if (isNaN(decimalPlaces) || decimalPlaces < 0 || decimalPlaces > 10) {
                    document.getElementById('decimalPlacesError').innerText = "Decimal places must be between 0 and 10.";
                    hideLoading();
                    return;
                } else {
                     document.getElementById('decimalPlacesError').innerText = "";
                }

                const config = {
                    theme,
                    decimalPlaces: parseInt(decimalPlaces),
                    angleUnit,
                    precisionMode,
                    complexNumbers,
                    scientificNotationThreshold: parseFloat(scientificNotationThreshold),
                    fontSize: parseInt(fontSize),
                    animationSpeed: parseInt(animationSpeed),
                    undoDepth: parseInt(undoDepth),
                    exportFormat
                };

                localStorage.setItem('calculatorConfig', JSON.stringify(config));

                // Simulate API call (replace with actual API endpoint)
                // fetch('/api/saveConfig', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json'
                //     },
                //     body: JSON.stringify(config)
                // })
                // .then(response => {
                //     if (!response.ok) {
                //         throw new Error('Network response was not ok');
                //     }
                //     return response.json();
                // })
                // .then(data => {
                //     console.log('Config saved successfully:', data);
                //     hideLoading();
                //     alert('Configuration saved successfully!');
                // })
                // .catch(error => {
                //     console.error('There was an error saving the config:', error);
                //     hideLoading();
                //     alert('Error saving configuration. Please try again.');
                // });

                console.log('Config saved to localStorage:', config);
                hideLoading();
                alert('Configuration saved successfully!');


            }, 1500); // Simulate network latency
        }

        // Load configuration on page load
        window.onload = () => {
            const savedConfig = localStorage.getItem('calculatorConfig');
            if (savedConfig) {
                const config = JSON.parse(savedConfig);
                document.getElementById('theme').value = config.theme;
                document.getElementById('decimalPlaces').value = config.decimalPlaces;
                document.getElementById('angleUnit').value = config.angleUnit;
                document.getElementById('precisionMode').value = config.precisionMode;
                document.getElementById('complexNumbers').value = config.complexNumbers;
                document.getElementById('scientificNotationThreshold').value = config.scientificNotationThreshold;
                document.getElementById('fontSize').value = config.fontSize;
                document.getElementById('animationSpeed').value = config.animationSpeed;
                document.getElementById('undoDepth').value = config.undoDepth;
                document.getElementById('exportFormat').value = config.exportFormat;
            }
        };
    </script>
</body>
</html>